---
i18n:
  en: "Production Deployment"
  fr: "Déploiement en production"
---

# Production Deployment

## Compilation for production

### Method 1: Folder-based build (recommended)

This repository now supports building as a folder (PyInstaller "onedir"), which keeps most resources outside the single binary. This is easier to debug and better for applications with large data sets (assets, models, localization modules).

To build all executables in one run you can use the project provided `build.spec` which will generate a directory per executable inside `dist/`:

```bash
# Use the spec file which creates an onedir build for each executable
pyinstaller build.spec

# The output will be available in dist/
# - dist/galad-islands/
# - dist/galad-config-tool/
# - dist/MaraudeurAiCleaner/

### Packaging note

The GitHub Actions packaging step gathers these onedir builds into a single ZIP, de-duplicating `assets/` and `models/`. To reproduce locally:

```bash
pyinstaller build.spec
bash tools/package_release.sh Linux
```
```

#### Game compilation

```bash
# Install PyInstaller
pip install pyinstaller

# For a single-file build (legacy option) replace with --onefile
pyinstaller --onefile --windowed \
    --add-data "assets:assets" \
    --name "GaladIslands" \
    main.py

# The executable is in dist/GaladIslands
# Remember to copy necessary asset folders
```

#### Configuration tool compilation

```bash
pyinstaller --onefile --windowed \
    --add-data "assets:assets" \
    --add-data "assets/locales:assets/locales" \
    --name "GaladConfigTool" \
    src/tools/galad_config_tool.py
```

### Method 2: Python distribution

```bash
# Prepare the environment
python3 -m venv venv_prod
source venv_prod/bin/activate
pip install -r requirements.txt

# Create a launch script
cat > start_game.sh << 'EOF'
#!/bin/bash
cd "$(dirname "$0")"
./venv_prod/bin/python main.py
EOF
chmod +x start_game.sh
```

## Production package structure

```txt
galad-islands-prod/
├── GaladIslands.exe        # Executable (Windows)
├── GaladIslands            # Executable (Linux/Mac)
├── GaladConfigTool.exe    # Config tool (Windows)
├── GaladConfigTool        # Config tool (Linux/Mac)
├── assets/                 # Game resources
├── README.txt              # Instructions
└── galad_config.json       # Configuration, created automatically if missing
```

## Deployment instructions

### For end users

1. **Download** the complete package
2. **Extract** into a folder
3. **Launch** the `GaladIslands` executable
